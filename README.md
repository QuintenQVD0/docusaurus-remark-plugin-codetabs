# docusaurus-remark-plugin-codetabs

Docusaurus v2 plugin to quickly create multi-language code tabs by converting code blocks to Tabs.

_**Note**: as a consequence, this only works when used with Docusaurus themes containing the `Tabs` and `TabItem` components._

_Other note: Performance is probably suboptimal. PRs are welcome._

## Installation

```bash
# npm
npm install docusaurus-remark-plugin-codetabs

# yarn
yarn add docusaurus-remark-plugin-codetabs
```

## Usage

Add the plugin to the Remark plugins array for each instance using it in `docusaurus.config.js`

```js
module.exports = {
  presets: [
    [
      '@docusaurus/preset-classic',
      {
        docs: {
          remarkPlugins: [
+           [require('docusaurus-remark-plugin-codetabs'), {
+             // options             
+           }],
          ],
        },
        blog: {
          remarkPlugins: [
+           [require('docusaurus-remark-plugin-codetabs'), {
+             // options             
+           }],
          ],
        },
      },
    ],
  ],
};
```

## Options

| Option | Type | Default | Description |
| :-: | :-: | :-: | :-- |
| `sync` | `boolean` | `false` | Whether to sync tab choices for code tabs generated with the same labels |
| `customLabels` | `Object` | `{}` | Custom default labels for languages. Entries are in the form `lang: label`. If the language already has a default label, this overrides it.

## Syntax

Multi-language code tabs are automatically generated by writing pseudo - code blocks within a code block with the metastring `codetabs`. The language for the code block is irrelevant, but must be specified.

    ```. codetabs
    ```

### Code tabs
Each code tab is delimited by the standard code block convention `````` ```[language] [metadata]``````; these can be indented any amount. 

**These inner code blocks do not have closing ` ``` `**

    ```. codetabs
    ``` jsx
    <MyComponent />
      ``` js
      console.log('');
    ```

### Tab Labels

A default label is assigned to each tab; however, a `label=` tag can be specified in the metastring to customize the label for a tab. Labels must be delimited by either single or double quotes.

In the case of duplicate labels, the latter ones are ignored.

The group id is generated from the resultant ordered set of labels, in the form ``codetabs-${uniqueLabels.join('-')}``

    ```. codetabs
    ```python label="Python3"
    ```
### Comments

Comments are delimited by empty code block delimiters (` ``` `) on a separate line. All content following that line until the next code tab will not be rendered.

Comment delimiters **must** be indented to avoid consuming the wrapping `codetabs` code block.

    ```. codetabs
        ```
    this is a comment
    ```

## Example

    ```. codetabs
    ```js title="index.js"
    const main = () => {
      console.log("Hello, world");
    }
    ```rust title='main.rs'
    let assignTitle: &str = "title=`main.rs`";
    ```cpp title="main.cpp"
    #include <iostream>
    using namespace std;
    int main() {
      cout << "Hello, world" << endl;
    }
    ```cpp label="C++11" title="main.cpp"
    string label="C++11";
        ```
    this is a comment.
    ```jsx title="Component.jsx"
    <Tabs>
      <TabItem />
      <TabItem />
    </Tabs>
    ```

![codetabs tabs example](./assets/example.gif)

## TODO

- `sync all` option? (all codetabs generated from plugin share groupid; usecase = if dedicated to sharing code or something and want people to be able to add languages but also keep everything synced idk)

- tests